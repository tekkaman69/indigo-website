rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Portfolio collection - allow all for now (add authentication later)
    match /portfolio/{document=**} {
      allow read, write: if true;
    }

    // Assets collection - allow all for now (add authentication later)
    match /assets/{assetId} {
      allow read: if true;  // Anyone can read assets
      allow write: if true; // Anyone can create/update assets (add auth later)
      allow delete: if true; // Anyone can delete unused assets (add auth later)
    }

    // Contact messages
    match /contact-messages/{document=**} {
      allow read, write: if true;
    }

    // Contacts (nouveau système)
    match /contacts/{contactId} {
      allow read, write: if true; // Temporaire - sécuriser plus tard
    }

    // Services - Marketplace
    match /services/{serviceId} {
      allow read: if true; // Lecture publique
      allow create, update, delete: if true; // Temporaire - admin uniquement en prod
    }

    // Orders - Marketplace
    match /orders/{orderId} {
      allow read, write: if true; // Temporaire - sécuriser avec magicToken en prod
    }

    // Order Messages - Marketplace
    match /order_messages/{messageId} {
      allow read, write: if true; // Temporaire - sécuriser en prod
    }

    // Order Files - Marketplace
    match /order_files/{fileId} {
      allow read, write: if true; // Temporaire - sécuriser en prod
    }

    // Testimonials
    match /testimonials/{testimonialId} {
      allow read, write: if true; // Temporaire - admin uniquement en prod
    }

    // Site Settings - Configuration globale du site
    match /site_settings/{settingId} {
      allow read: if true; // Lecture publique (pour vérifier visibilité pages)
      allow write: if true; // Temporaire - admin uniquement en prod
    }
  }
}
